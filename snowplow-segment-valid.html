<!doctype html>
<html>
<head>
    <title>Fingerprint Inspection</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script type="text/javascript" async="1">
        // Load the Tracker V3
        (function (p, l, o, w, i, n, g) {
          if (!p[i]) {
            p.GlobalSnowplowNamespace = p.GlobalSnowplowNamespace || [];
            p.GlobalSnowplowNamespace.push(i);
            p[i] = function () {
              (p[i].q = p[i].q || []).push(arguments);
            };
            p[i].q = p[i].q || [];
            n = l.createElement(o);
            g = l.getElementsByTagName(o)[0];
            n.async = 1;
            n.src = w;
            g.parentNode.insertBefore(n, g);
          }
        })(
          window,
          document,
          "script",
          "//cdn.jsdelivr.net/npm/@snowplow/javascript-tracker@3.4.0/dist/sp.min.js",
          "snowplow"
        );
      
        // Initialization
        window.snowplow("newTracker", "sp", "c.snowcat.io", {
          appId: "yourappid",
          discoverRootDomain: true,
          cookieSameSite: "Lax", // Recommended
          contexts: {
            webPage: true, // default, can be omitted
          },
        });
      </script>
      <script>
        !function(){var i="analytics",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel='canonical']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="analytics.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="rWAfVSHRrcvxG0UH4vv3aFZ2dIPmv08c";;analytics.SNIPPET_VERSION="5.2.0";
        analytics.load("rWAfVSHRrcvxG0UH4vv3aFZ2dIPmv08c");
        analytics.page();
        }}();
      </script>
</head>
<script>
    !function(){var i="analytics",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel='canonical']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="rWAfVSHRrcvxG0UH4vv3aFZ2dIPmv08c";;analytics.SNIPPET_VERSION="5.2.0";
    analytics.load("rWAfVSHRrcvxG0UH4vv3aFZ2dIPmv08c");
    analytics.page();
    }}();
  </script>
<body>
    <div class="p-8">
    <h1 class="text-4xl font-bold py-8">Segment Event Tester</h1>
    <div class="grid grid-cols-2 mt-8">
    <div>
        <p>These buttons send VALID UnstructuredEvents using the schemas that already exist for each event type. The only issue we have is with track (event) payload that has a message greater than 36 chars. I need to update the schema to 1-0-1 and make some cleanups</p>

        <div class="grid grid-cols-12 flex">

            <div class="">

              <button class="mt-6 w-64 px-4 py-2 flex hover:bg-green-700 text-base font-medium rounded-md text-white bg-blue-500" onClick="PageEvent();">
                Page (com.segment/v1/p)
              </button>

              <button class="mt-6 w-64 px-4 py-2 flex hover:bg-green-700 text-base font-medium rounded-md text-white bg-blue-500" onClick="TrackEvent();">
                Track (com.segment/v1/t)
              </button>

              <button class="mt-6 w-64 px-4 py-2 flex hover:bg-green-700 text-base font-medium rounded-md text-white bg-blue-500" onClick="TrackGroup();">
                Group (com.segment/v1/g)
              </button>

              <button class="mt-6 w-64 px-4 py-2 flex hover:bg-green-700 text-base font-medium rounded-md text-white bg-blue-500" onClick="IdentifyEvent();">
                Identify (com.segment/v1/i)
              </button>
              
              <button class="mt-6 w-64 px-4 py-2 flex hover:bg-green-700 text-base font-medium rounded-md text-white bg-blue-500" onClick="TrackAlias();">
                Alias (com.segment/v1/a)
              </button>        


            
              
            </div>
           
        </div>
    </div>
    <div>
     <!-- TODO DEBUG WINDOW https://github.com/opensnowcat/opensnowcat-collector/blob/analyticsjs-bridge/core/src/test/scala/com.snowplowanalytics.snowplow.collectors.scalastream/fixtures/AnalyticsJsFixture.scala -->
    </div>
<script>
  function PageEvent() {
  var PageUnstructData =  { event: {
      schema: "iglu:com.segment/page/jsonschema/1-0-0",
      data: {
                        "timestamp": "2024-04-14T20:36:53.131Z",
                        "integrations": {},
                        "userId": "562927",
                        "anonymousId": "e09fac9f-16e4-43f1-8753-c55023820f81",
                        "type": "page",
                        "properties": {
                            "path": "/",
                            "referrer": "",
                            "search": "",
                            "title": "SnowcatCloud: Cloud-Hosted Snowplow SOC2 Type 2 Certified",
                            "url": "https://www.snowcatcloud.com"
                        },
                        "context": {
                            "page": {
                                "path": "/",
                                "referrer": "",
                                "search": "",
                                "title": "SnowcatCloud: Cloud-Hosted Snowplow SOC2 Type 2 Certified",
                                "url": "https://www.snowcatcloud.com"
                            },
                            "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/123.0.0.0 Safari/537.36",
                            "userAgentData": {
                                "brands": [
                                    {
                                        "brand": "Google Chrome",
                                        "version": "123"
                                    },
                                    {
                                        "brand": "Not:A-Brand",
                                        "version": "8"
                                    },
                                    {
                                        "brand": "Chromium",
                                        "version": "123"
                                    }
                                ],
                                "mobile": false,
                                "platform": "macOS"
                            },
                            "locale": "en-US",
                            "library": {
                                "name": "analytics.js",
                                "version": "next-1.64.0"
                            },
                            "timezone": "Europe/Madrid"
                        },
                        "messageId": "81ad0ad4-fd9f-4af0-a3fb-180ef2c3c611",
                        "writeKey": "rWAfVSHRrcvxG0UH4vv3aFZ2dIPmv08c",
                        "sentAt": "2024-04-14T20:36:53.134Z",
                        "_metadata": {
                            "bundled": [
                                "Segment.io"
                            ],
                            "unbundled": [],
                            "bundledIds": []
                        }
        }
      }
  }

  console.log(PageUnstructData);
  snowplow('trackSelfDescribingEvent', PageUnstructData);

}

function IdentifyEvent() {
  var PageUnstructData =  { event: {
      schema: "iglu:com.segment/traits/jsonschema/1-0-0",
      data: {
            "timestamp": "2024-05-17T20:30:07.948Z",
            "integrations": {},
            "userId": "668679",
            "anonymousId": "c2c2b51e-7a1c-46b9-aba4-d90260e864b6",
            "type": "identify",
            "traits": {
                "email": "test@sample.com"
            },
            "context": {
                "page": {
                    "path": "/",
                    "referrer": "",
                    "search": "",
                    "title": "SnowcatCloud: Cloud-Hosted Snowplow SOC2 Type 2 Certified",
                    "url": "https://www.snowcatcloud.com"
                },
                "userAgent": "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36",
                "userAgentData": {
                    "brands": [
                        {
                            "brand": "Chromium",
                            "version": "124"
                        },
                        {
                            "brand": "Google Chrome",
                            "version": "124"
                        },
                        {
                            "brand": "Not-A.Brand",
                            "version": "99"
                        }
                    ],
                    "mobile": false,
                    "platform": "macOS"
                },
                "locale": "en-US",
                "library": {
                    "name": "analytics.js",
                    "version": "next-1.64.0"
                },
                "timezone": "Europe/Madrid"
            },
            "messageId": "81ad0ad4-fd9f-4af0-a3fb-180ef2c3c611",
            "writeKey": "rWAfVSHRrcvxG0UH4vv3aFZ2dIPmv08c",
            "sentAt": "2024-05-17T20:30:07.955Z",
            "_metadata": {
                "bundled": [
                    "Segment.io"
                ],
                "unbundled": [],
                "bundledIds": []
            }
        }
      }
  }

  console.log(PageUnstructData);
  snowplow('trackSelfDescribingEvent', PageUnstructData);

}

function TrackEvent() {
  var PageUnstructData =  { event: {
      schema: "iglu:com.segment/event/jsonschema/1-0-0",
      data: 
      {"timestamp":"2024-05-17T20:30:55.698Z","integrations":{},"anonymousId":"c2c2b51e-7a1c-46b9-aba4-d90260e864b6","event":"Article Bookmarked","type":"track","properties":{"title":"Snow Fall","subtitle":"The Avalanche at Tunnel Creek","author":"John Branch"},"context":{"page":{"path":"/","referrer":"","search":"","title":"SnowcatCloud: Cloud-Hosted Snowplow SOC2 Type 2 Certified","url":"https://www.snowcatcloud.com"},"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36","userAgentData":{"brands":[{"brand":"Chromium","version":"124"},{"brand":"Google Chrome","version":"124"},{"brand":"Not-A.Brand","version":"99"}],"mobile":false,"platform":"macOS"},"locale":"en-US","library":{"name":"analytics.js","version":"next-1.64.0"},"timezone":"Europe/Madrid"},"messageId":"81ad0ad4-fd9f-4af0-a3fb-180ef2c3c611","writeKey":"rWAfVSHRrcvxG0UH4vv3aFZ2dIPmv08c","sentAt":"2024-05-17T20:30:55.701Z","_metadata":{"bundled":["Segment.io"],"unbundled":[],"bundledIds":[]}}
      }
  }

  console.log(PageUnstructData);
  snowplow('trackSelfDescribingEvent', PageUnstructData);

}

function TrackGroup() {
  var PageUnstructData =  { event: {
      schema: "iglu:com.segment/group/jsonschema/1-0-0",
      data: 
      {"timestamp":"2024-05-17T20:34:21.521Z","integrations":{},"userId":"668679","anonymousId":"c2c2b51e-7a1c-46b9-aba4-d90260e864b6","type":"group","traits":{"principles":["Eckert","Mauchly"],"site":"Eckertâ€“Mauchly Computer Corporation","statedGoals":"Develop the first commercial computer","industry":"Technology"},"groupId":"UNIVAC Working Group","context":{"page":{"path":"/","referrer":"","search":"","title":"SnowcatCloud: Cloud-Hosted Snowplow SOC2 Type 2 Certified","url":"https://www.snowcatcloud.com"},"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36","userAgentData":{"brands":[{"brand":"Chromium","version":"124"},{"brand":"Google Chrome","version":"124"},{"brand":"Not-A.Brand","version":"99"}],"mobile":false,"platform":"macOS"},"locale":"en-US","library":{"name":"analytics.js","version":"next-1.64.0"},"timezone":"Europe/Madrid"},"messageId":"81ad0ad4-fd9f-4af0-a3fb-180ef2c3c611","writeKey":"rWAfVSHRrcvxG0UH4vv3aFZ2dIPmv08c","sentAt":"2024-05-17T20:34:21.525Z","_metadata":{"bundled":["Segment.io"],"unbundled":[],"bundledIds":[]}}
      }
  }

  console.log(PageUnstructData);
  snowplow('trackSelfDescribingEvent', PageUnstructData);

}

function TrackAlias() {
  var PageUnstructData =  { event: {
      schema: "iglu:com.segment/alias/jsonschema/1-0-0",
      data: 
      {"timestamp":"2024-05-17T20:38:43.526Z","integrations":{},"userId":"newid","anonymousId":"c2c2b51e-7a1c-46b9-aba4-d90260e864b6","type":"alias","previousId":"668679","context":{"page":{"path":"/","referrer":"","search":"","title":"SnowcatCloud: Cloud-Hosted Snowplow SOC2 Type 2 Certified","url":"https://www.snowcatcloud.com"},"userAgent":"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/124.0.0.0 Safari/537.36","userAgentData":{"brands":[{"brand":"Chromium","version":"124"},{"brand":"Google Chrome","version":"124"},{"brand":"Not-A.Brand","version":"99"}],"mobile":false,"platform":"macOS"},"locale":"en-US","library":{"name":"analytics.js","version":"next-1.64.0"},"timezone":"Europe/Madrid"},"messageId":"81ad0ad4-fd9f-4af0-a3fb-180ef2c3c611","writeKey":"rWAfVSHRrcvxG0UH4vv3aFZ2dIPmv08c","sentAt":"2024-05-17T20:38:43.530Z","_metadata":{"bundled":["Segment.io"],"unbundled":[],"bundledIds":[]}}
      }
  }

  console.log(PageUnstructData);
  snowplow('trackSelfDescribingEvent', PageUnstructData);

}

function TrackScreen() {
  var PageUnstructData =  { event: {
      schema: "iglu:com.segment/screen/jsonschema/1-0-0",
      data: 
      {"anonymousId":"3a12eab0-bca7-11e4-8dfc-aa07a5b093db","channel":"mobile","context":{"ip":"8.8.8.8"},"integrations":{"All":true,"Mixpanel":false,"Salesforce":false},"messageId":"022bb90c-bbac-11e4-8dfc-aa07a5b093db","name":"Dropdown selected","properties":{"variation":"blue"},"receivedAt":"2024-05-17T20:52:05.029Z","sentAt":"2024-05-17T20:52:04.796Z","timestamp":"2024-05-17T20:52:04.796Z","type":"screen","userId":"97980cfea0067","version":"1.1"}
      }
  }

  console.log(PageUnstructData);
  snowplow('trackSelfDescribingEvent', PageUnstructData);

}



</script>

</div>












</div>
</body>
</html>